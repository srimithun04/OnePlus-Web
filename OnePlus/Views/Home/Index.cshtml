@model IEnumerable<OnePlus.Models.Product>

@{
    ViewData["Title"] = "Home";
    // Get categories from ViewData
    var categories = ViewData["Categories"] as IEnumerable<OnePlus.Models.Category>;
}

@section Styles {
    <link rel="stylesheet" href="~/css/Home/Home.css" asp-append-version="true" />
}

<section class="hero-section">
    <!-- The background elements are now wrapped in their own container for proper layering -->
    <div class="hero-background">
        <div class="hero-slider-track">
            <div class="hero-slide">
                <img src="~/images/Home/Banner1.jpg" alt="Phone 1" />
            </div>
            <div class="hero-slide">
                <img src="~/images/Home/Banner2.jpg" alt="Headphones" />
            </div>
            <div class="hero-slide">
                <img src="~/images/Home/Banner3.jpg " alt="Gaming Setup" />
            </div>
            <div class="hero-slide">
                <img src="~/images/Home/Banner4.jpg" alt="Smartwatch" />
            </div>
            <div class="hero-slide">
                <img src="~/images/Home/Banner5.jpg" alt="Phone 2" />
            </div>
        </div>
        <div class="hero-overlay"></div>
    </div>

    <!-- The main content sits on top -->
    <div class="hero-content">
        <h1 class="animate-on-load">ONEPLUS UNIVERSE</h1>
        <p class="animate-on-load delay-1">Discover our latest collection of cutting-edge technology. Performance and style, perfected.</p>
        <div class="hero-buttons animate-on-load delay-2">
            <a href="#collection" class="btn btn-primary-hero">Explore Products</a>
            <a href="#" class="btn btn-secondary-hero">Latest Deals</a>
        </div>
    </div>
</section>


<div class="ticker-wrap">
    <div class="ticker">
        <span>NEVER SETTLE</span>
        <span class="ticker-icon">✦</span>
        <span>FLAGSHIP PERFORMANCE</span>
        <span class="ticker-icon">✦</span>
        <span>PREMIUM DESIGN</span>
        <span class="ticker-icon">✦</span>
        <span>BURDENLESS EXPERIENCE</span>
        <span class="ticker-icon">✦</span>
    </div>
</div>

<!-- Newly Added Section -->
<section class="dynamic-duo-section">
    <div class="container">
        <div class="duo-grid">
            <div class="duo-card text-card animate-on-scroll">
                <h3>Discover the Future</h3>
                <h2>Flagship Mobile Collection</h2>
                <a href="#" class="btn-check-now">Check Now</a>
            </div>
            <div class="duo-card image-card animate-on-scroll">
                <img src="~/images/Home/Dynamic1.jpg" alt="Stylish Woman">
            </div>
            <div class="duo-card image-card animate-on-scroll">
                <img src="~/images/Home/Dynamic2.jpg" alt="Stylish Man">
            </div>
            <div class="duo-card text-card animate-on-scroll">
                <h3>Tech Redefined</h3>
                <h2>Next-Gen Smartwatches</h2>
                <a href="#" class="btn-check-now">Check Now</a>
            </div>
        </div>
        <div class="video-promo-container animate-on-scroll">
            <video playsinline autoplay muted loop class="promo-video">
                <source src="~/video/OnePlus 13s _ Stronger. Smarter. Smaller._2K.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
    </div>
</section>


<section id="collection" class="collection-section">
    <div class="container">
        <div class="section-header animate-on-scroll">
            <h2>OUR COLLECTION</h2>
            <a asp-controller="Home" asp-action="All_Products" class="view-all-link">View All -></a>
            <p>A curated selection of our top products.</p>
        </div>

        <!-- The product grid is replaced by a horizontal scroller -->
        <div class="product-scroller-container animate-on-scroll">
            <button class="scroll-btn left" id="scroll-left">‹</button>
            <div class="product-scroller">
                @foreach (var product in Model.Take(10))
                {
                    var categoryIds = string.Join(" ", product.ProductCategories.Select(pc => pc.CategoryId));
                    <div class="product-card" data-categories="@categoryIds">
                        <div class="product-image-container">
                            <img src="@(product.ImageUrl ?? "/images/placeholder.png")" alt="@product.Name" class="product-image" />
                        </div>
                        <div class="product-info">
                            <h5 class="product-name">@product.Name</h5>
                            <p class="product-price">@product.Price.ToString("C")</p>
                            <div class="product-actions">
                                <a href="#" class="btn btn-add-cart" data-product-id="@product.ProductId">Add to Cart</a>
                            </div>
                        </div>
                    </div>
                }
            </div>
            <button class="scroll-btn right" id="scroll-right">›</button>
        </div>
    </div>
</section>

@section Scripts {
    <script src="~/js/Home/Home.js" asp-append-version="true"></script>
}
